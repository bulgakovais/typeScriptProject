import { getFavoritePlacesFromLocalStorage } from "./getFavoritePlacesFromLocalStorage.js";
export function favoritesHandlerClick(event, places) {
    if (event.target.classList.contains("btn-book-place'")) {
        // fetchToBookPlace(event)
        console.log(event.target);
    }
    // Если нажали на значок избранного
    if (event.target.classList.contains("favorites")) {
        let targetHeart = event.target;
        if (targetHeart.tagName != 'DIV')
            return;
        let targetPlace = {};
        places.forEach(place => {
            if (place.id == targetHeart.id) {
                targetPlace = place;
            }
        });
        toggleFavoriteItem(targetHeart, targetPlace);
    }
    // Если нажали на кнопку бронирования
    // if (event.target.classList.contains("btn-book-place'")) {
    //   // fetchToBookPlace(event)
    //   console.log(event.target)
    // }
}
function toggleFavoriteItem(listItem, targetPlace) {
    let favoritePlaces = getFavoritePlacesFromLocalStorage();
    if (listItem.classList.contains('active')) {
        listItem.classList.remove('active');
        if (Array.isArray(favoritePlaces)) {
            const updatedFavorites = favoritePlaces.filter((f) => f.id !== Number(listItem.id));
            localStorage.setItem('favoriteItems', JSON.stringify(updatedFavorites));
        }
    }
    else {
        listItem.classList.add('active');
        const data = { id: targetPlace.id, name: targetPlace.name, image: targetPlace.image };
        if (Array.isArray(favoritePlaces)) {
            const allData = JSON.stringify([...favoritePlaces, data]);
            localStorage.setItem('favoriteItems', allData);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmF2b3JpdGVzSGFuZGxlckNsaWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2hlbHBlcnMvZmF2b3JpdGVzSGFuZGxlckNsaWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxNQUFNLHdDQUF3QyxDQUFBO0FBSTFGLE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsTUFBTTtJQUdqRCxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO1FBQ3RELDBCQUEwQjtRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQTtLQUMxQjtJQUNELG1DQUFtQztJQUNuQyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTtRQUNoRCxJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFBO1FBQzlCLElBQUksV0FBVyxDQUFDLE9BQU8sSUFBSSxLQUFLO1lBQUUsT0FBTTtRQUN4QyxJQUFJLFdBQVcsR0FBWSxFQUFFLENBQUE7UUFDN0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNyQixJQUFJLEtBQUssQ0FBQyxFQUFFLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRTtnQkFDOUIsV0FBVyxHQUFHLEtBQUssQ0FBQTthQUNwQjtRQUNILENBQUMsQ0FBQyxDQUFBO1FBQ0Ysa0JBQWtCLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFBO0tBQzdDO0lBRUQscUNBQXFDO0lBQ3JDLDREQUE0RDtJQUM1RCwrQkFBK0I7SUFDL0IsOEJBQThCO0lBQzlCLElBQUk7QUFDTixDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsV0FBVztJQUMvQyxJQUFJLGNBQWMsR0FBRyxpQ0FBaUMsRUFBRSxDQUFBO0lBQ3hELElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDekMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDbkMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBRWpDLE1BQU0sZ0JBQWdCLEdBQXVELGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQ3ZJLFlBQVksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFBO1NBQ3hFO0tBQ0Y7U0FDSTtRQUNILFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2hDLE1BQU0sSUFBSSxHQUFHLEVBQUUsRUFBRSxFQUFFLFdBQVcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUNyRixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFDakMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUE7WUFDekQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLENBQUE7U0FDL0M7S0FDRjtBQUVILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRGYXZvcml0ZVBsYWNlc0Zyb21Mb2NhbFN0b3JhZ2UgfSBmcm9tIFwiLi9nZXRGYXZvcml0ZVBsYWNlc0Zyb21Mb2NhbFN0b3JhZ2UuanNcIlxuaW1wb3J0IHsgZmV0Y2hUb0Jvb2tQbGFjZSB9IGZyb20gXCIuLi9BUEkvZmV0Y2hUb0Jvb2tQbGFjZS5qc1wiXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGZhdm9yaXRlc0hhbmRsZXJDbGljayhldmVudCwgcGxhY2VzKSB7XG5cblxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ0bi1ib29rLXBsYWNlJ1wiKSkge1xuICAgIC8vIGZldGNoVG9Cb29rUGxhY2UoZXZlbnQpXG4gICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KVxuICB9XG4gIC8vINCV0YHQu9C4INC90LDQttCw0LvQuCDQvdCwINC30L3QsNGH0L7QuiDQuNC30LHRgNCw0L3QvdC+0LPQvlxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImZhdm9yaXRlc1wiKSkge1xuICAgIGxldCB0YXJnZXRIZWFydCA9IGV2ZW50LnRhcmdldFxuICAgIGlmICh0YXJnZXRIZWFydC50YWdOYW1lICE9ICdESVYnKSByZXR1cm5cbiAgICBsZXQgdGFyZ2V0UGxhY2U6IHVua25vd24gPSB7fVxuICAgIHBsYWNlcy5mb3JFYWNoKHBsYWNlID0+IHtcbiAgICAgIGlmIChwbGFjZS5pZCA9PSB0YXJnZXRIZWFydC5pZCkge1xuICAgICAgICB0YXJnZXRQbGFjZSA9IHBsYWNlXG4gICAgICB9XG4gICAgfSlcbiAgICB0b2dnbGVGYXZvcml0ZUl0ZW0odGFyZ2V0SGVhcnQsIHRhcmdldFBsYWNlKVxuICB9XG5cbiAgLy8g0JXRgdC70Lgg0L3QsNC20LDQu9C4INC90LAg0LrQvdC+0L/QutGDINCx0YDQvtC90LjRgNC+0LLQsNC90LjRj1xuICAvLyBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ0bi1ib29rLXBsYWNlJ1wiKSkge1xuICAvLyAgIC8vIGZldGNoVG9Cb29rUGxhY2UoZXZlbnQpXG4gIC8vICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUZhdm9yaXRlSXRlbShsaXN0SXRlbSwgdGFyZ2V0UGxhY2UpIHtcbiAgbGV0IGZhdm9yaXRlUGxhY2VzID0gZ2V0RmF2b3JpdGVQbGFjZXNGcm9tTG9jYWxTdG9yYWdlKClcbiAgaWYgKGxpc3RJdGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZhdm9yaXRlUGxhY2VzKSkge1xuXG4gICAgICBjb25zdCB1cGRhdGVkRmF2b3JpdGVzOiBBcnJheTx7IGlkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgaW1hZ2U6IHN0cmluZyB9PiA9IGZhdm9yaXRlUGxhY2VzLmZpbHRlcigoZikgPT4gZi5pZCAhPT0gTnVtYmVyKGxpc3RJdGVtLmlkKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYXZvcml0ZUl0ZW1zJywgSlNPTi5zdHJpbmdpZnkodXBkYXRlZEZhdm9yaXRlcykpXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgY29uc3QgZGF0YSA9IHsgaWQ6IHRhcmdldFBsYWNlLmlkLCBuYW1lOiB0YXJnZXRQbGFjZS5uYW1lLCBpbWFnZTogdGFyZ2V0UGxhY2UuaW1hZ2UgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZhdm9yaXRlUGxhY2VzKSkge1xuICAgICAgY29uc3QgYWxsRGF0YSA9IEpTT04uc3RyaW5naWZ5KFsuLi5mYXZvcml0ZVBsYWNlcywgZGF0YV0pXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmF2b3JpdGVJdGVtcycsIGFsbERhdGEpXG4gICAgfVxuICB9XG5cbn1cbiJdfQ==
import { getFavoritePlacesFromLocalStorage } from "./getFavoritePlacesFromLocalStorage.js";
export function favoritesHandlerClick(event, places) {
    let targetHeart = event.target;
    if (targetHeart.tagName != 'DIV')
        return;
    let targetPlace = {};
    places.forEach(place => {
        if (place.id == targetHeart.id) {
            targetPlace = place;
        }
    });
    toggleFavoriteItem(targetHeart, targetPlace);
}
function toggleFavoriteItem(listItem, targetPlace) {
    let favoritePlaces = getFavoritePlacesFromLocalStorage();
    if (listItem.classList.contains('active')) {
        listItem.classList.remove('active');
        if (Array.isArray(favoritePlaces)) {
            const updatedFavorites = favoritePlaces.filter((f) => f.id !== Number(listItem.id));
            localStorage.setItem('favoriteItems', JSON.stringify(updatedFavorites));
        }
    }
    else {
        listItem.classList.add('active');
        const data = { id: targetPlace.id, name: targetPlace.name, image: targetPlace.image };
        if (Array.isArray(favoritePlaces)) {
            const allData = JSON.stringify([...favoritePlaces, data]);
            localStorage.setItem('favoriteItems', allData);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmF2b3JpdGVzSGFuZGxlckNsaWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2hlbHBlcnMvZmF2b3JpdGVzSGFuZGxlckNsaWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxNQUFNLHdDQUF3QyxDQUFBO0FBRTFGLE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsTUFBTTtJQUVqRCxJQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFBO0lBQzlCLElBQUksV0FBVyxDQUFDLE9BQU8sSUFBSSxLQUFLO1FBQUUsT0FBTTtJQUN4QyxJQUFJLFdBQVcsR0FBWSxFQUFFLENBQUE7SUFDN0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNyQixJQUFJLEtBQUssQ0FBQyxFQUFFLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRTtZQUM5QixXQUFXLEdBQUcsS0FBSyxDQUFBO1NBQ3BCO0lBQ0gsQ0FBQyxDQUFDLENBQUE7SUFFRixrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUE7QUFDOUMsQ0FBQztBQUVELFNBQVMsa0JBQWtCLENBQUMsUUFBUSxFQUFFLFdBQVc7SUFDL0MsSUFBSSxjQUFjLEdBQUcsaUNBQWlDLEVBQUUsQ0FBQTtJQUN4RCxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQ3pDLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ25DLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUVqQyxNQUFNLGdCQUFnQixHQUF1RCxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUN2SSxZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQTtTQUN4RTtLQUNGO1NBQ0k7UUFDSCxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNoQyxNQUFNLElBQUksR0FBRyxFQUFFLEVBQUUsRUFBRSxXQUFXLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDckYsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxFQUFFO1lBQ2pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFBO1lBQ3pELFlBQVksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1NBQy9DO0tBQ0Y7QUFFSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RmF2b3JpdGVQbGFjZXNGcm9tTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vZ2V0RmF2b3JpdGVQbGFjZXNGcm9tTG9jYWxTdG9yYWdlLmpzXCJcblxuZXhwb3J0IGZ1bmN0aW9uIGZhdm9yaXRlc0hhbmRsZXJDbGljayhldmVudCwgcGxhY2VzKSB7XG5cbiAgbGV0IHRhcmdldEhlYXJ0ID0gZXZlbnQudGFyZ2V0XG4gIGlmICh0YXJnZXRIZWFydC50YWdOYW1lICE9ICdESVYnKSByZXR1cm5cbiAgbGV0IHRhcmdldFBsYWNlOiB1bmtub3duID0ge31cbiAgcGxhY2VzLmZvckVhY2gocGxhY2UgPT4ge1xuICAgIGlmIChwbGFjZS5pZCA9PSB0YXJnZXRIZWFydC5pZCkge1xuICAgICAgdGFyZ2V0UGxhY2UgPSBwbGFjZVxuICAgIH1cbiAgfSlcblxuICB0b2dnbGVGYXZvcml0ZUl0ZW0odGFyZ2V0SGVhcnQsIHRhcmdldFBsYWNlKVxufVxuXG5mdW5jdGlvbiB0b2dnbGVGYXZvcml0ZUl0ZW0obGlzdEl0ZW0sIHRhcmdldFBsYWNlKSB7XG4gIGxldCBmYXZvcml0ZVBsYWNlcyA9IGdldEZhdm9yaXRlUGxhY2VzRnJvbUxvY2FsU3RvcmFnZSgpXG4gIGlmIChsaXN0SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgbGlzdEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYXZvcml0ZVBsYWNlcykpIHtcblxuICAgICAgY29uc3QgdXBkYXRlZEZhdm9yaXRlczogQXJyYXk8eyBpZDogbnVtYmVyLCBuYW1lOiBzdHJpbmcsIGltYWdlOiBzdHJpbmcgfT4gPSBmYXZvcml0ZVBsYWNlcy5maWx0ZXIoKGYpID0+IGYuaWQgIT09IE51bWJlcihsaXN0SXRlbS5pZCkpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmF2b3JpdGVJdGVtcycsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRGYXZvcml0ZXMpKVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgIGNvbnN0IGRhdGEgPSB7IGlkOiB0YXJnZXRQbGFjZS5pZCwgbmFtZTogdGFyZ2V0UGxhY2UubmFtZSwgaW1hZ2U6IHRhcmdldFBsYWNlLmltYWdlIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYXZvcml0ZVBsYWNlcykpIHtcbiAgICAgIGNvbnN0IGFsbERhdGEgPSBKU09OLnN0cmluZ2lmeShbLi4uZmF2b3JpdGVQbGFjZXMsIGRhdGFdKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhdm9yaXRlSXRlbXMnLCBhbGxEYXRhKVxuICAgIH1cbiAgfVxuXG59XG4iXX0=
import { baseURL } from "./index.js";
import { getSearchData } from "../helpers/getSearchData.js";
import { renderToast } from "../lib.js";
export function fetchToBookPlace(event) {
    const { getdateIn, getdateOut, } = getSearchData();
    const placeId = event.target.dataset.placeid;
    const placeName = event.target.dataset.name;
    const checkIn = new Date(getdateIn).getTime();
    const checkOut = new Date(getdateOut).getTime();
    fetch(baseURL + `/places/${placeId}?checkInDate=${checkIn}&checkOutDate=${checkOut}`, {
        method: 'PATCH',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            bookedDates: [checkIn, checkOut]
        })
    })
        .then(response => response.json())
        .then(() => {
        renderToast({
            text: [`Вы успешно забронировали номер в отеле ${placeName} c ${getdateIn} по ${getdateOut}.`],
            type: 'success'
        }, {
            name: 'Отлично!',
            handler: () => {
                console.log(`Уведомление закрыто, ${placeName}`);
            }
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmV0Y2hUb0Jvb2tQbGFjZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BUEkvZmV0Y2hUb0Jvb2tQbGFjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBQ3BDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQTtBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBR3ZDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxLQUFLO0lBRXBDLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxHQUFHLEdBQUcsYUFBYSxFQUFFLENBQUE7SUFFbEQsTUFBTSxPQUFPLEdBQVcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFBO0lBQ3BELE1BQU0sU0FBUyxHQUFXLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQTtJQUVuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUM3QyxNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUUvQyxLQUFLLENBQUMsT0FBTyxHQUFHLFdBQVcsT0FBTyxnQkFBZ0IsT0FBTyxpQkFBaUIsUUFBUSxFQUFFLEVBQUU7UUFDcEYsTUFBTSxFQUFFLE9BQU87UUFDZixPQUFPLEVBQUU7WUFDUCxjQUFjLEVBQUUsa0JBQWtCO1NBQ25DO1FBQ0QsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDbkIsV0FBVyxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztTQUNqQyxDQUFDO0tBQ0gsQ0FBQztTQUNDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNqQyxJQUFJLENBQUMsR0FBRyxFQUFFO1FBQ1QsV0FBVyxDQUNUO1lBQ0UsSUFBSSxFQUFFLENBQUMsMENBQTBDLFNBQVMsTUFBTSxTQUFTLE9BQU8sVUFBVSxHQUFHLENBQUM7WUFDOUYsSUFBSSxFQUFFLFNBQVM7U0FDaEIsRUFDRDtZQUNFLElBQUksRUFBRSxVQUFVO1lBQ2hCLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0JBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsU0FBUyxFQUFFLENBQUMsQ0FBQTtZQUNsRCxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0lBQ04sQ0FBQyxDQUFDLENBQUE7QUFFTixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmFzZVVSTCB9IGZyb20gXCIuL2luZGV4LmpzXCJcbmltcG9ydCB7IGdldFNlYXJjaERhdGEgfSBmcm9tIFwiLi4vaGVscGVycy9nZXRTZWFyY2hEYXRhLmpzXCJcbmltcG9ydCB7IHJlbmRlclRvYXN0IH0gZnJvbSBcIi4uL2xpYi5qc1wiXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVG9Cb29rUGxhY2UoZXZlbnQpIHtcblxuICBjb25zdCB7IGdldGRhdGVJbiwgZ2V0ZGF0ZU91dCwgfSA9IGdldFNlYXJjaERhdGEoKVxuXG4gIGNvbnN0IHBsYWNlSWQ6IG51bWJlciA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LnBsYWNlaWRcbiAgY29uc3QgcGxhY2VOYW1lOiBzdHJpbmcgPSBldmVudC50YXJnZXQuZGF0YXNldC5uYW1lXG5cbiAgY29uc3QgY2hlY2tJbiA9IG5ldyBEYXRlKGdldGRhdGVJbikuZ2V0VGltZSgpXG4gIGNvbnN0IGNoZWNrT3V0ID0gbmV3IERhdGUoZ2V0ZGF0ZU91dCkuZ2V0VGltZSgpXG5cbiAgZmV0Y2goYmFzZVVSTCArIGAvcGxhY2VzLyR7cGxhY2VJZH0/Y2hlY2tJbkRhdGU9JHtjaGVja0lufSZjaGVja091dERhdGU9JHtjaGVja091dH1gLCB7XG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGJvb2tlZERhdGVzOiBbY2hlY2tJbiwgY2hlY2tPdXRdXG4gICAgfSlcbiAgfSlcbiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgcmVuZGVyVG9hc3QoXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBbYNCS0Ysg0YPRgdC/0LXRiNC90L4g0LfQsNCx0YDQvtC90LjRgNC+0LLQsNC70Lgg0L3QvtC80LXRgCDQsiDQvtGC0LXQu9C1ICR7cGxhY2VOYW1lfSBjICR7Z2V0ZGF0ZUlufSDQv9C+ICR7Z2V0ZGF0ZU91dH0uYF0sXG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAn0J7RgtC70LjRh9C90L4hJyxcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg0KPQstC10LTQvtC80LvQtdC90LjQtSDQt9Cw0LrRgNGL0YLQviwgJHtwbGFjZU5hbWV9YClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcblxufVxuIl19
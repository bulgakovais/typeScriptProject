import { baseURL } from "./index.js";
import { getSearchData } from "../helpers/getSearchData.js";
import { renderToast } from "../lib.js";
export function fetchToBookPlace(event) {
    const { getdateIn, getdateOut, } = getSearchData();
    const element = event.target;
    const placeId = Number(element.dataset.placeid);
    const placeName = element.dataset.name;
    const checkIn = new Date(getdateIn).getTime();
    const checkOut = new Date(getdateOut).getTime();
    fetch(baseURL + `/places/${placeId}?checkInDate=${checkIn}&checkOutDate=${checkOut}`, {
        method: 'PATCH',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            bookedDates: [checkIn, checkOut]
        })
    })
        .then(response => response.json())
        .then(() => {
        renderToast({
            text: [`Вы успешно забронировали номер в отеле ${placeName} c ${getdateIn} по ${getdateOut}.`],
            type: 'success'
        }, {
            name: 'Отлично!',
            handler: () => {
                console.log(`Уведомление закрыто, ${placeName}`);
            }
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmV0Y2hUb0Jvb2tQbGFjZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9BUEkvZmV0Y2hUb0Jvb2tQbGFjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBQ3BDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQTtBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBR3ZDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxLQUFZO0lBRTNDLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxHQUFHLEdBQUcsYUFBYSxFQUFFLENBQUE7SUFDbEQsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE1BQXFCLENBQUM7SUFDNUMsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDdkQsTUFBTSxTQUFTLEdBQVcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUE7SUFFOUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDN0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7SUFFL0MsS0FBSyxDQUFDLE9BQU8sR0FBRyxXQUFXLE9BQU8sZ0JBQWdCLE9BQU8saUJBQWlCLFFBQVEsRUFBRSxFQUFFO1FBQ3BGLE1BQU0sRUFBRSxPQUFPO1FBQ2YsT0FBTyxFQUFFO1lBQ1AsY0FBYyxFQUFFLGtCQUFrQjtTQUNuQztRQUNELElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ25CLFdBQVcsRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7U0FDakMsQ0FBQztLQUNILENBQUM7U0FDQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDakMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNULFdBQVcsQ0FDVDtZQUNFLElBQUksRUFBRSxDQUFDLDBDQUEwQyxTQUFTLE1BQU0sU0FBUyxPQUFPLFVBQVUsR0FBRyxDQUFDO1lBQzlGLElBQUksRUFBRSxTQUFTO1NBQ2hCLEVBQ0Q7WUFDRSxJQUFJLEVBQUUsVUFBVTtZQUNoQixPQUFPLEVBQUUsR0FBRyxFQUFFO2dCQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLFNBQVMsRUFBRSxDQUFDLENBQUE7WUFDbEQsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNOLENBQUMsQ0FBQyxDQUFBO0FBRU4sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJhc2VVUkwgfSBmcm9tIFwiLi9pbmRleC5qc1wiXG5pbXBvcnQgeyBnZXRTZWFyY2hEYXRhIH0gZnJvbSBcIi4uL2hlbHBlcnMvZ2V0U2VhcmNoRGF0YS5qc1wiXG5pbXBvcnQgeyByZW5kZXJUb2FzdCB9IGZyb20gXCIuLi9saWIuanNcIlxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRvQm9va1BsYWNlKGV2ZW50OiBFdmVudCkge1xuXG4gIGNvbnN0IHsgZ2V0ZGF0ZUluLCBnZXRkYXRlT3V0LCB9ID0gZ2V0U2VhcmNoRGF0YSgpXG4gIGNvbnN0IGVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gIGNvbnN0IHBsYWNlSWQ6IG51bWJlciA9IE51bWJlcihlbGVtZW50LmRhdGFzZXQucGxhY2VpZClcbiAgY29uc3QgcGxhY2VOYW1lOiBzdHJpbmcgPSBlbGVtZW50LmRhdGFzZXQubmFtZVxuXG4gIGNvbnN0IGNoZWNrSW4gPSBuZXcgRGF0ZShnZXRkYXRlSW4pLmdldFRpbWUoKVxuICBjb25zdCBjaGVja091dCA9IG5ldyBEYXRlKGdldGRhdGVPdXQpLmdldFRpbWUoKVxuXG4gIGZldGNoKGJhc2VVUkwgKyBgL3BsYWNlcy8ke3BsYWNlSWR9P2NoZWNrSW5EYXRlPSR7Y2hlY2tJbn0mY2hlY2tPdXREYXRlPSR7Y2hlY2tPdXR9YCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBib29rZWREYXRlczogW2NoZWNrSW4sIGNoZWNrT3V0XVxuICAgIH0pXG4gIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHJlbmRlclRvYXN0KFxuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogW2DQktGLINGD0YHQv9C10YjQvdC+INC30LDQsdGA0L7QvdC40YDQvtCy0LDQu9C4INC90L7QvNC10YAg0LIg0L7RgtC10LvQtSAke3BsYWNlTmFtZX0gYyAke2dldGRhdGVJbn0g0L/QviAke2dldGRhdGVPdXR9LmBdLFxuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ9Ce0YLQu9C40YfQvdC+IScsXG4gICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYNCj0LLQtdC00L7QvNC70LXQvdC40LUg0LfQsNC60YDRi9GC0L4sICR7cGxhY2VOYW1lfWApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbn1cbiJdfQ==